# frozen_string_literal: true

require "dotenv/tasks"
require "rake/testtask"

task default: %w[def]

namespace :test do
  Rake::TestTask.new do |t|
    t.name = "unit"
    t.libs << "test"
    t.test_files = FileList["test/unit/*.rb"]
    t.verbose = true
    t.warning = true
  end

  Rake::TestTask.new do |t|
    t.name = "integration"
    t.libs << "test"
    t.test_files = FileList["test/integration/*.rb"]
    t.verbose = true
    t.warning = true
  end
end

task :test do
  Rake::Task["test:unit"].invoke
  Rake::Task["test:integration"].invoke
end

task :coverage do
  ENV["COVERAGE"] = "true"
  Rake::Task["test"].execute
end

task def: %i[dotenv coverage] do
end
